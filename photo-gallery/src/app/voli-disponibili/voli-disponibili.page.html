<ion-header class="custom-header">
  <ion-toolbar>
    <div class="header-content">
      <div class="logo-section">
        <h1>VayGo</h1>
        <span class="logo-subtitle">Airlines</span>
      </div>
      <div class="header-actions">
        <ion-button fill="clear" size="small" href="/tabs/tab3">
          <ion-icon name="person-outline"></ion-icon>
        </ion-button>
      </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="gestione-voli-container">

    <!-- Menu di Navigazione Voli -->
    <div class="voli-navigation-menu vaygo-fade-in">
      <div class="menu-header">
        <h2>Gestione Voli VayGo</h2>
      </div>
      <div class="menu-buttons">
        <ion-button
          class="menu-button"
          fill="clear"
          routerLink="/gestione-voli">
          <ion-icon name="create-outline"></ion-icon>
          Gestisci Voli
        </ion-button>
        <ion-button
          class="menu-button active"
          fill="clear"
          [routerLink]="'/voli-disponibili'"
          routerLinkActive="active">
          <ion-icon name="list-outline"></ion-icon>
          Visualizza Voli
        </ion-button>
        <ion-button
          class="menu-button"
          fill="clear"
          [routerLink]="'/prenotazioni'">
          <ion-icon name="ticket-outline"></ion-icon>
          Prenotazioni Ricevute
        </ion-button>
      </div>
    </div>

    <!-- Sezione Voli Disponibili -->
    <div class="voli-container vaygo-fade-in">
      <div class="section-header">
        <h2>Voli Disponibili</h2>
        <p>Visualizza tutti i voli disponibili nella flotta VayGo Airlines</p>
      </div>

      @if(voli.length > 0) {
        <div class="voli-grid">
          @for(volo of voli; track $index) {
            <ion-card class="results-card volo-card">
              <ion-card-header>
                <div class="volo-header">
                  <div class="volo-id">
                    <ion-icon name="airplane-outline"></ion-icon>
                    <span>{{volo.idVolo}}</span>
                  </div>
                  <div class="volo-status">
                    <ion-badge *ngIf="volo.postiDisponibili > 0" color="primary">Disponibile</ion-badge>
                  </div>
                  <div class="volo-status">
                    <ion-badge *ngIf="volo.postiDisponibili == 0" color="primary">Non disponibile</ion-badge>
                  </div>
                </div>
                <ion-card-title>
                  <div class="flight-route">
                    <span class="departure">{{volo.partenza}}</span>
                    <span class="arrow">✈️</span>
                    <span class="arrival">{{volo.destinazione}}</span>
                  </div>
                </ion-card-title>
              </ion-card-header>

              <ion-card-content>
                <div class="volo-details">
                  <div class="detail-row">
                    <div class="detail-item">
                      <ion-icon name="calendar-outline"></ion-icon>
                      <div class="detail-info">
                        <span class="detail-label">Data Partenza</span>
                        <span class="detail-value">{{volo.oraPartenza.split(' ')[0].split("-").reverse().join("-")}}</span>
                      </div>
                    </div>
                    <div class="detail-item">
                      <ion-icon name="time-outline"></ion-icon>
                      <div class="detail-info">
                        <span class="detail-label">Orario Partenza</span>
                        <span class="detail-value">{{volo.oraPartenza.split(' ')[1]}}</span>
                      </div>
                    </div>
                  </div>

                  <div class="detail-row">
                    <div class="detail-item">
                      <ion-icon name="time-outline"></ion-icon>
                      <div class="detail-info">
                        <span class="detail-label">Orario Arrivo</span>
                        <span class="detail-value">{{volo.oraArrivo.split(' ')[1]}}</span>
                      </div>
                    </div>
                    <div class="detail-item">
                      <ion-icon name="people-outline"></ion-icon>
                      <div class="detail-info">
                        <span class="detail-label">Posti Disponibili</span>
                        <span class="detail-value">{{volo.postiDisponibili}}</span>
                      </div>
                    </div>
                  </div>

                  <div class="detail-row">
                    <div class="detail-item price-item">
                      <ion-icon name="card-outline"></ion-icon>
                      <div class="detail-info">
                        <span class="detail-label">Prezzo</span>
                        <span class="detail-value price">{{volo.prezzo}} €</span>
                      </div>
                    </div>
                    <div class="detail-item">
                      <ion-icon name="location-outline"></ion-icon>
                      <div class="detail-info">
                        <span class="detail-label">Rotta</span>
                        <span class="detail-value">{{volo.partenza}} → {{volo.destinazione}}</span>
                      </div>
                    </div>
                  </div>

                  <div class="volo-actions">
                    <ion-button
                      fill="solid"
                      size="small"
                      class="action-button primary"
                      [routerLink]="'/gestione-voli'"
                      (click)="Modifica(volo)">
                      <ion-icon name="create-outline" slot="start"></ion-icon>
                      Modifica
                    </ion-button>
                  </div>
                </div>
              </ion-card-content>
            </ion-card>
          }
        </div>
      } @else {
        <div class="empty-state">
          <div class="empty-icon">
            <ion-icon name="airplane-outline"></ion-icon>
          </div>
          <h3>Nessun volo disponibile</h3>
          <p>Non ci sono voli disponibili al momento</p>
          <ion-button
            fill="solid"
            [routerLink]="'/gestione-voli'"
            class="create-flight-button">
            <ion-icon name="add-circle-outline" slot="start"></ion-icon>
            Crea Nuovo Volo
          </ion-button>
        </div>
      }

      @if(richiestaEsito != '') {
        <div class="feedback-info">
           <ion-icon name="information-circle-outline"></ion-icon>
          <span>{{ richiestaEsito }}</span>
        </div>
      }
    </div>
  </div>
</ion-content>
